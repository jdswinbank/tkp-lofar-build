From aa81b5c5b9af0a3312e6590f1e939b03e6524866 Mon Sep 17 00:00:00 2001
From: John Swinbank <swinbank@transientskp.org>
Date: Wed, 27 Jun 2012 14:54:10 +0200
Subject: [PATCH] Fix build with gcc-4.7

---
 casa/Arrays/IPosition.h                 |    1 +
 casa/System/Casarc.cc                   |    1 +
 scimath/Mathematics/ConvolveGridder.tcc |    8 ++++----
 3 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/casa/Arrays/IPosition.h b/casa/Arrays/IPosition.h
index e6b7121..d35babd 100644
--- a/casa/Arrays/IPosition.h
+++ b/casa/Arrays/IPosition.h
@@ -34,6 +34,7 @@
 #include <casa/BasicSL/String.h>
 #include <vector>
 #include <cstddef>                  // for ptrdiff_t
+#include <unistd.h>
 
 namespace casa { //# NAMESPACE CASA - BEGIN
 
diff --git a/casa/System/Casarc.cc b/casa/System/Casarc.cc
index a25c6c2..85ac9d3 100644
--- a/casa/System/Casarc.cc
+++ b/casa/System/Casarc.cc
@@ -34,6 +34,7 @@
 #include <fcntl.h>
 #include <sys/mman.h>
 #include <cstdio>
+#include <unistd.h>
 
 #define USE_FLOCK 0
 #define CASARC_DEBUG 0
diff --git a/scimath/Mathematics/ConvolveGridder.tcc b/scimath/Mathematics/ConvolveGridder.tcc
index 3bf8e83..ee447f5 100644
--- a/scimath/Mathematics/ConvolveGridder.tcc
+++ b/scimath/Mathematics/ConvolveGridder.tcc
@@ -305,11 +305,11 @@ Bool ConvolveGridder<Domain, Range>::grid(Array<Range> &gridded,
 				    const Vector<Domain>& p,
 				    const Range& value)
 {
-  loc=location(loc,p);
+  loc=this->location(loc,p);
   loc-=offsetVec;
   if(onGrid(loc,supportVec)) {
     Bool del;
-    posVec=position(posVec, p);
+    posVec=this->position(posVec, p);
     const IPosition& fs = gridded.shape();
     vector<Int> s(fs.begin(), fs.end());
     switch(loc.nelements()) {
@@ -345,10 +345,10 @@ Bool ConvolveGridder<Domain, Range>::degrid(const Array<Range> &gridded,
 				    const Vector<Domain>& p,
 				    Range& value)
 {
-  loc=location(loc,p); 
+  loc=this->location(loc,p);
  if(onGrid(loc,supportVec)) {
     Bool del;
-    posVec=position(posVec, p);
+    posVec=this->position(posVec, p);
     const IPosition& fs = gridded.shape();
     vector<Int> s(fs.begin(), fs.end());
     switch(loc.nelements()) {
-- 
1.7.10

